# Настройка переменных окружения

В этом проекте используются переменные окружения для хранения конфиденциальных данных и настроек. Ниже приведены инструкции по настройке переменных окружения для разных сред.

## Поддерживаемые файлы переменных окружения

Проект поддерживает следующие файлы переменных окружения (в порядке приоритета):

1. `.env` - базовые переменные для всех сред
2. `.env.development` - переменные для среды разработки
3. `.env.production` - переменные для production среды
4. `.env.local` - локальные переменные, которые не должны попадать в систему контроля версий
5. `.env.development.local` - локальные переменные для среды разработки
6. `.env.production.local` - локальные переменные для production среды

Переменные из файлов с более высоким приоритетом перезаписывают переменные из файлов с более низким приоритетом.

## Необходимые переменные окружения

Для корректной работы приложения необходимо настроить следующие переменные:

### Google Sheets API

```
# ID таблицы Google Sheets (можно найти в URL таблицы)
# Например: https://docs.google.com/spreadsheets/d/YOUR_SPREADSHEET_ID/edit
SPREADSHEET_ID=your_spreadsheet_id_here

# Email сервисного аккаунта Google
# Формат: something@project-id.iam.gserviceaccount.com
SERVICE_ACCOUNT_EMAIL=your_service_account_email@project-id.iam.gserviceaccount.com

# Приватный ключ сервисного аккаунта
# Скопируйте из JSON-файла ключа сервисного аккаунта
# Важно: сохраните переносы строк как \n
SERVICE_ACCOUNT_PRIVATE_KEY=-----BEGIN PRIVATE KEY-----\nYour private key content\n-----END PRIVATE KEY-----\n
```

### Настройки сервера

```
# Порт для запуска серверной части приложения
PORT=3001
```

## Создание файлов переменных окружения

1. Скопируйте файл `.env.example` в `.env`:
   ```bash
   cp .env.example .env
   ```

2. Отредактируйте файл `.env` и заполните необходимые переменные.

3. Для локальной разработки можно создать файл `.env.local` с переопределениями:
   ```bash
   touch .env.local
   ```

4. Для разных сред можно создать соответствующие файлы:
   ```bash
   touch .env.development
   touch .env.production
   ```

## Проверка переменных окружения

В режиме разработки вы можете проверить загруженные переменные окружения, открыв в браузере:

```
http://localhost:3001/api/env-info
```

Этот эндпоинт доступен только в режиме разработки и показывает безопасную информацию о загруженных переменных окружения.

## Использование переменных окружения в коде

### В серверной части (Node.js)

```javascript
// Доступ к переменным окружения
const spreadsheetId = process.env.SPREADSHEET_ID;
const serviceAccountEmail = process.env.SERVICE_ACCOUNT_EMAIL;
```

### В клиентской части (React)

```javascript
// Доступ к переменным окружения
const spreadsheetId = process.env.SPREADSHEET_ID;
```

## Безопасность

- **Никогда** не коммитьте файлы `.env`, `.env.local`, `.env.*.local` в репозиторий
- Всегда используйте `.env.example` как шаблон с пустыми значениями
- Не храните чувствительные данные в переменных без суффикса `.local`
- Не используйте переменные окружения напрямую в клиентском коде для чувствительных данных 