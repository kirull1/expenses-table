<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Учет расходов" />
    <link rel="apple-touch-icon" href="/logo192.png" />
    <link rel="manifest" href="/manifest.json" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700&display=swap"
    />
    <title>Учет расходов</title>
    <script>
      // Process polyfill
      window.process = window.process || {};
      window.process.env = window.process.env || {};
      
      // Inject environment variables directly
      window.ENV_VARS = {
        SPREADSHEET_ID: "%SPREADSHEET_ID%",
        SERVICE_ACCOUNT_EMAIL: "%SERVICE_ACCOUNT_EMAIL%"
      };
      
      // Copy to process.env for compatibility
      if (window.ENV_VARS.SPREADSHEET_ID && window.ENV_VARS.SPREADSHEET_ID !== "%SPREADSHEET_ID%") {
        window.process.env.SPREADSHEET_ID = window.ENV_VARS.SPREADSHEET_ID;
      }
      if (window.ENV_VARS.SERVICE_ACCOUNT_EMAIL && window.ENV_VARS.SERVICE_ACCOUNT_EMAIL !== "%SERVICE_ACCOUNT_EMAIL%") {
        window.process.env.SERVICE_ACCOUNT_EMAIL = window.ENV_VARS.SERVICE_ACCOUNT_EMAIL;
      }
    </script>
  </head>
  <body>
    <div id="root"></div>
    <noscript>Для работы приложения необходимо включить JavaScript.</noscript>
    <script type="module" src="/src/main.jsx?v=%BUILD_TIMESTAMP%"></script>
    <!-- Add cache-busting query parameters to other resources -->
    <script>
      // Add cache-busting query parameters to all CSS and JS resources
      document.addEventListener('DOMContentLoaded', function() {
        const timestamp = document.querySelector('meta[name="build-timestamp"]')?.content || new Date().getTime();
        const links = document.querySelectorAll('link[rel="stylesheet"]');
        const scripts = document.querySelectorAll('script[src]');
        
        // Add query parameter to CSS files
        links.forEach(link => {
          if (link.href && !link.href.includes('?')) {
            link.href = link.href + '?v=' + timestamp;
          }
        });
        
        // Add query parameter to JS files
        scripts.forEach(script => {
          if (script.src && !script.src.includes('?')) {
            script.src = script.src + '?v=' + timestamp;
          }
        });
      });
    </script>
  </body>
</html>
